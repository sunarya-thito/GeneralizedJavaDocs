{
  "packageName": "jdk.dynalink.support",
  "simpleName": "ChainedCallSite",
  "moduleName": "jdk.dynalink",
  "type": "CLASS",
  "superClass": {
    "name": "jdk.dynalink.support.AbstractRelinkableCallSite",
    "type": "Class"
  },
  "members": [
    {
      "returnType": {
        "name": "int",
        "type": "Class"
      },
      "parameters": [],
      "memberType": "JavaMethod",
      "modifiers": 4,
      "name": "getMaxChainLength",
      "comment": "The maximum number of method handles in the chain. Defaults to 8. You can override it in a subclass if you need to change the value.",
      "tagMap": {
        "return": [
          "the maximum number of method handles in the chain. The return value is checked, and if your override returns a value less than 1, a \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/RuntimeException.html\" title\u003d\"class in java.lang\"\u003e\u003ccode\u003eRuntimeException\u003c/code\u003e\u003c/a\u003e will be thrown."
        ]
      }
    },
    {
      "returnType": {
        "name": "void",
        "type": "Class"
      },
      "parameters": [
        {
          "type": {
            "name": "jdk.dynalink.linker.GuardedInvocation",
            "type": "Class"
          },
          "field": {
            "name": "guardedInvocation"
          }
        },
        {
          "type": {
            "name": "java.lang.invoke.MethodHandle",
            "type": "Class"
          },
          "field": {
            "name": "relinkAndInvoke"
          }
        }
      ],
      "memberType": "JavaMethod",
      "modifiers": 1,
      "name": "relink",
      "comment": "Description copied from interface: RelinkableCallSite",
      "tagMap": {
        "param": [
          "\u003ccode\u003eguardedInvocation\u003c/code\u003e - the guarded invocation that the call site should incorporate into its target method handle.",
          "\u003ccode\u003erelinkAndInvoke\u003c/code\u003e - a relink-and-invoke method handle. This is a method handle matching the method type of the call site that is supplied by the \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/jdk.dynalink/jdk/dynalink/DynamicLinker.html\" title\u003d\"class in jdk.dynalink\"\u003e\u003ccode\u003eDynamicLinker\u003c/code\u003e\u003c/a\u003e as a callback. It should be used by this call site as the ultimate fallback when it can\u0027t invoke its target with the passed arguments. The fallback method is such that when it\u0027s invoked, it\u0027ll try to obtain an adequate target \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/jdk.dynalink/jdk/dynalink/linker/GuardedInvocation.html\" title\u003d\"class in jdk.dynalink.linker\"\u003e\u003ccode\u003eGuardedInvocation\u003c/code\u003e\u003c/a\u003e for the invocation, and subsequently invoke \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/jdk.dynalink/jdk/dynalink/RelinkableCallSite.html#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)\"\u003e\u003ccode\u003eRelinkableCallSite.relink(GuardedInvocation, MethodHandle)\u003c/code\u003e\u003c/a\u003e or \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/jdk.dynalink/jdk/dynalink/RelinkableCallSite.html#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)\"\u003e\u003ccode\u003eRelinkableCallSite.resetAndRelink(GuardedInvocation, MethodHandle)\u003c/code\u003e\u003c/a\u003e, and finally invoke the target."
        ]
      }
    },
    {
      "returnType": {
        "name": "void",
        "type": "Class"
      },
      "parameters": [
        {
          "type": {
            "name": "jdk.dynalink.linker.GuardedInvocation",
            "type": "Class"
          },
          "field": {
            "name": "guardedInvocation"
          }
        },
        {
          "type": {
            "name": "java.lang.invoke.MethodHandle",
            "type": "Class"
          },
          "field": {
            "name": "relinkAndInvoke"
          }
        }
      ],
      "memberType": "JavaMethod",
      "modifiers": 1,
      "name": "resetAndRelink",
      "comment": "Description copied from interface: RelinkableCallSite",
      "tagMap": {
        "param": [
          "\u003ccode\u003eguardedInvocation\u003c/code\u003e - the guarded invocation that the call site should use to build its target method handle.",
          "\u003ccode\u003erelinkAndInvoke\u003c/code\u003e - a relink-and-invoke method handle. This is a method handle matching the method type of the call site that is supplied by the \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/jdk.dynalink/jdk/dynalink/DynamicLinker.html\" title\u003d\"class in jdk.dynalink\"\u003e\u003ccode\u003eDynamicLinker\u003c/code\u003e\u003c/a\u003e as a callback. It should be used by this call site as the ultimate fallback when it can\u0027t invoke its target with the passed arguments. The fallback method is such that when it\u0027s invoked, it\u0027ll try to obtain an adequate target \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/jdk.dynalink/jdk/dynalink/linker/GuardedInvocation.html\" title\u003d\"class in jdk.dynalink.linker\"\u003e\u003ccode\u003eGuardedInvocation\u003c/code\u003e\u003c/a\u003e for the invocation, and subsequently invoke \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/jdk.dynalink/jdk/dynalink/RelinkableCallSite.html#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)\"\u003e\u003ccode\u003eRelinkableCallSite.relink(GuardedInvocation, MethodHandle)\u003c/code\u003e\u003c/a\u003e or \n\u003ca href\u003d\"https://docs.oracle.com/en/java/javase/16/docs/api/jdk.dynalink/jdk/dynalink/RelinkableCallSite.html#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)\"\u003e\u003ccode\u003eRelinkableCallSite.resetAndRelink(GuardedInvocation, MethodHandle)\u003c/code\u003e\u003c/a\u003e, and finally invoke the target."
        ]
      }
    },
    {
      "parameters": [
        {
          "type": {
            "name": "jdk.dynalink.CallSiteDescriptor",
            "type": "Class"
          },
          "field": {
            "name": "descriptor"
          }
        }
      ],
      "memberType": "JavaMethod",
      "modifiers": 1,
      "comment": "Creates a new chained call site.",
      "tagMap": {
        "param": [
          "\u003ccode\u003edescriptor\u003c/code\u003e - the descriptor for the call site."
        ]
      }
    }
  ],
  "memberType": "JavaClass",
  "modifiers": 1,
  "name": "jdk.dynalink.support.ChainedCallSite",
  "comment": "A relinkable call site that implements a polymorphic inline caching strategy. It remembers up to 8 \n\u003ca href\u003d\"../linker/GuardedInvocation.html\" title\u003d\"class in jdk.dynalink.linker\"\u003e\u003ccode\u003eGuardedInvocation\u003c/code\u003e\u003c/a\u003es it was linked with, and on each relink request builds a cascading chain of method handles of one invocation falling back to the next one. The number of remembered invocations can be customized by overriding \n\u003ca href\u003d\"#getMaxChainLength()\"\u003e\u003ccode\u003egetMaxChainLength()\u003c/code\u003e\u003c/a\u003e in a subclass. When this call site is relinked with a new invocation and the length of the chain is already at the maximum, it will throw away the oldest invocation. Invocations with invalidated switch points and ones for which their invalidating exception triggered are removed eagerly from the chain. The invocations are never reordered; the most recently linked method handle is always at the start of the chain and the least recently linked at its end. The call site can be safely relinked on more than one thread concurrently. Race conditions in linking are resolved by throwing away the \n\u003ca href\u003d\"../linker/GuardedInvocation.html\" title\u003d\"class in jdk.dynalink.linker\"\u003e\u003ccode\u003eGuardedInvocation\u003c/code\u003e\u003c/a\u003e produced on the losing thread without incorporating it into the chain, so it can lead to repeated linking for the same arguments.",
  "tagMap": {}
}